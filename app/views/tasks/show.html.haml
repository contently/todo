%h1= "Task '#{@task.name}'"

.row
  .col-md-6
    .card
      .card-body
        %h5.card-title General Information
        %table.table.table-striped.table-condensed
          %tr
            %th Name
            %td= @task.name
          %tr
            %th Completed
            %td
              - if @task.completed?
                %span.badge.bg-success Yes
              - else
                %span.badge.bg-danger No
          %tr
            %th List
            %td
              - if @task.list
                = link_to @task.list.name, list_tasks_path(@task.list)
              - else
                N/A
          %tr
            %th Created At
            %td= @task.created_at
          %tr
            %th Updated At
            %td= @task.updated_at

  .col-md-6
    .card
      .card-body
        %h5.card-title Audit Log (asc)
        %table.table.table-striped.table-condensed
          %thead
            %th User with ID:
            %th Performed
            %th With changes
            %th At time:
          %tbody
            - @task.audits.each do |audit|
              %tr
                %td= audit.user_id
                %td= audit.action
                %td
                  %pre= JSON.pretty_generate(audit.audited_changes)
                %td= audit.created_at

=link_to 'Edit', edit_list_task_path(@task.list, @task)
\|
=link_to 'Back', list_tasks_path(@task.list)
